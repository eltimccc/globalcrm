<div class="table-wrapper mt-2">
  <form action="{% url 'tasks:index' %}" method="get" class="form-inline" id="sortForm">
      {% csrf_token %}
      <div class="form-group mr-2">
          <label for="sort_by" class="mr-2 btn-sm">Сортировать по:</label>
          <select name="sort_by" id="sort_by" class="form-control form-control-sm fixed-width">
              <option value="created_at" {% if sort_by == "created_at" %}selected{% endif %}>Дате создания</option>
              <option value="completed" {% if sort_by == "completed" %}selected{% endif %}>Статусу</option>
              <option value="worker" {% if sort_by == "worker" %}selected{% endif %}>Исполнитель</option>
              <option value="created_by" {% if sort_by == "created_by" %}selected{% endif %}>Заказчик</option>
              <option value="deadline" {% if sort_by == "deadline" %}selected{% endif %}>Дедлайн</option>
          </select>
      </div>
  </form>
  <table class="table table-bordered">
      <thead>
          <tr>
              <th scope="col">Дата создания</th>
              <th scope="col">Исполнитель</th>
              <th scope="col">Название задачи</th>
              <th scope="col">Описание</th>
              <th scope="col">Статус</th>
              <th scope="col">Крайний срок</th>
          </tr>
      </thead>
      <tbody>
          {% for task in tasks %}
          <tr class="{% if task.completed %}table-success{% endif %}">
              <td style="width: 80px;">{{ task.created_at|date:"d.m.Y H:i" }}</td>
              <td style="width: 100px;">{{ task.worker }}</td>
              <td style="width: 200px;">
                  <a href="{% url 'tasks:task_detail' task.pk %}">{{ task.title }}</a>
              </td>
              <td style="width: 250px;">
                  <a href="{% url 'tasks:task_detail' task.pk %}">{{ task.description|slice:":35" }}</a>
              </td>
              <td style="width: 50px;">{{ task.completed }}</td>
              <td style="width: 90px;">{{ task.deadline|date:"d.m.Y H:i" }}</td>
          </tr>
          {% empty %}
          <tr>
              <td colspan="6">Нет задач.</td>
          </tr>
          {% endfor %}
      </tbody>
  </table>
</div>
{% load static %}
<script src="{% static 'js/sort.js' %}"></script>
